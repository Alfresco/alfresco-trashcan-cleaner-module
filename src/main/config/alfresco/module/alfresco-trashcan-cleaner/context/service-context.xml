<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>

    <bean id="trashcanCleaner" class="org.alfresco.trashcan.TrashcanCleaner">
        <constructor-arg ref="nodeService" />
        <constructor-arg ref="transactionService" />
        <constructor-arg value="${trashcan-cleaner.deleteBatchCount}" />
        <constructor-arg value="${trashcan-cleaner.keepPeriod}" />
    </bean>

    <bean id="trashcanCleanerJob" class="org.alfresco.util.CronTriggerBean">
        <property name="jobDetail">
            <bean id="trashcanCleanerJobDetail"
                class="org.springframework.scheduling.quartz.JobDetailBean">
                <property name="jobClass">
                    <value>org.alfresco.trashcan.TrashcanCleanerJob</value>
                </property>
                <property name="jobDataAsMap">
                    <map>
                        <entry key="trashcanCleaner" value-ref="trashcanCleaner" />
                        <entry key="jobLockService" value-ref="jobLockService" />
                    </map>
                </property>
            </bean>
        </property>
        <property name="scheduler" ref="schedulerFactory" />
        <property name="cronExpression" value="${trashcan-cleaner.cron}" />
    </bean>

</beans>
